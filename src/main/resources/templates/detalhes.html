<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>AlgaWorks - Detalhes do Contato</title>
    <link rel="stylesheet" th:href="@{/css/estilo.css}" />
  </head>

  <body>
    <header>
      <nav>
        <ul>
          <li><a th:href="@{/}"> AlgaWorks Contatos </a></li>
          <li><a th:href="@{/contatos}"> Listar </a></li>
          <li><a th:href="@{/contatos/novo}"> Novo </a></li>
        </ul>
      </nav>
    </header>

    <main>
      <section>
        <h1>Detalhes do Contato</h1>
        
        <div th:if="${contato != null}" class="detalhes-contato">
          <!-- CabeÃ§alho com nome e favorito -->
          <div class="contato-header">
            <h2 th:text="${contato.nome}">Nome do Contato</h2>
            <span th:if="${contato.favorito}" class="favorito-badge">â­ Favorito</span>
          </div>
          
          <!-- InformaÃ§Ãµes principais -->
          <div class="info-principal">
            <div class="info-item">
              <strong>ğŸ“ Telefone:</strong>
              <span th:text="${contato.telefone}">Telefone</span>
            </div>
            
            <div class="info-item" th:if="${contato.email != null}">
              <strong>ğŸ“§ Email:</strong>
              <span th:text="${contato.email}">Email</span>
            </div>
            
            <div class="info-item" th:if="${contato.endereco != null}">
              <strong>ğŸ“ EndereÃ§o:</strong>
              <span th:text="${contato.endereco}">EndereÃ§o</span>
            </div>
            
            <div class="info-item">
              <strong>ğŸ·ï¸ Categoria:</strong>
              <span th:text="${contato.categoria.toString()}" 
                    th:class="'categoria-' + ${contato.categoria.name().toLowerCase()}">
                Categoria
              </span>
            </div>
          </div>
          
          <!-- InformaÃ§Ãµes adicionais -->
          <div class="info-adicional">
            <div class="info-item" th:if="${contato.dataNascimento != null}">
              <strong>ğŸ‚ Data de Nascimento:</strong>
              <span th:text="${contato.dataNascimentoFormatada}">Data</span>
              <span th:if="${contato.idade > 0}" th:text="'(' + ${contato.idade} + ' anos)'"></span>
            </div>
            
            <div class="info-item">
              <strong>ğŸ“… Criado em:</strong>
              <span th:text="${contato.dataCriacaoFormatada}">Data de criaÃ§Ã£o</span>
            </div>
            
            <div class="info-item" th:if="${contato.dataAtualizacao != contato.dataCriacao}">
              <strong>ğŸ”„ Ãšltima atualizaÃ§Ã£o:</strong>
              <span th:text="${contato.dataAtualizacaoFormatada}">Data de atualizaÃ§Ã£o</span>
            </div>
          </div>
          
          <!-- AÃ§Ãµes -->
          <div class="acoes-detalhes">
            <a th:href="@{/contatos/{id}(id=${contato.id})}" class="btn-editar">
              âœï¸ Editar Contato
            </a>
            
            <form th:action="@{/contatos/{id}/favorito(id=${contato.id})}" 
                  th:method="post" style="display: inline;">
              <button type="submit" th:class="${contato.favorito ? 'btn-favorito-remover' : 'btn-favorito-adicionar'}"
                      th:title="${contato.favorito ? 'Remover dos favoritos' : 'Adicionar aos favoritos'}">
                <span th:text="${contato.favorito ? 'ğŸ’” Remover dos Favoritos' : 'â¤ï¸ Adicionar aos Favoritos'}"></span>
              </button>
            </form>
            
            <form th:action="@{/contatos/{id}(id=${contato.id})}" 
                  th:method="delete" 
                  onsubmit="return confirm('Tem certeza que deseja remover este contato?');"
                  style="display: inline;">
              <button type="submit" class="btn-remover">ğŸ—‘ï¸ Remover Contato</button>
            </form>
            
            <a th:href="@{/contatos}" class="btn-voltar">â¬…ï¸ Voltar Ã  Lista</a>
          </div>
        </div>
        
        <!-- Mensagem quando contato nÃ£o encontrado -->
        <div th:if="${contato == null}" class="contato-nao-encontrado">
          <p>âŒ Contato nÃ£o encontrado.</p>
          <a th:href="@{/contatos}" class="btn-voltar">â¬…ï¸ Voltar Ã  Lista</a>
        </div>
      </section>
    </main>
  </body>
</html>